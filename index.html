<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>年会大屏答题互动系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Arial',sans-serif;}
        body{background:linear-gradient(135deg,#0c2461 0%,#1e3799 100%);color:white;min-height:100vh;}
        .container{display:flex;flex-direction:column;height:100vh;padding:20px;}
        .header{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:3px solid rgba(255,255,255,0.2);margin-bottom:20px;}
        .logo{font-size:2.5rem;font-weight:bold;background:linear-gradient(90deg,#ff9a00,#ff5e00);-webkit-background-clip:text;background-clip:text;color:transparent;}
        .event-title{font-size:2.8rem;text-align:center;color:#fff;text-shadow:0 0 15px rgba(255,255,255,0.5);}
        .timer{background:rgba(0,0,0,0.4);border-radius:20px;padding:15px 40px;font-size:3.5rem;font-weight:bold;color:#ffdd00;border:3px solid #ffdd00;}
        .main-content{display:flex;flex:1;gap:20px;margin-bottom:20px;}
        .question-section{flex:3;background:rgba(255,255,255,0.1);border-radius:20px;padding:30px;}
        .answers-section{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-top:20px;}
        .answer{background:rgba(255,255,255,0.15);border-radius:15px;padding:25px;font-size:2rem;cursor:pointer;text-align:center;}
        .answer:hover{background:rgba(255,255,255,0.25);}
        .ranking-section{flex:1;background:rgba(255,255,255,0.1);border-radius:20px;padding:25px;}
        .control-panel{display:flex;justify-content:space-between;padding:15px 30px;background:rgba(0,0,0,0.4);border-radius:15px;margin-top:10px;}
        .control-btn{background:linear-gradient(90deg,#3498db,#2980b9);color:white;border:none;padding:15px 30px;font-size:1.5rem;border-radius:10px;cursor:pointer;}
        .qr-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.85);display:none;justify-content:center;align-items:center;z-index:1000;}
        .qr-container{background:linear-gradient(135deg,#1e3799 0%,#0c2461 100%);border-radius:25px;padding:40px;text-align:center;max-width:600px;width:90%;}
    </style>
</head>
<body>
    <div class="qr-overlay" id="qrOverlay">
        <div class="qr-container">
            <button id="closeQrBtn" style="position:absolute;top:20px;right:20px;background:none;border:none;color:white;font-size:2rem;cursor:pointer;">×</button>
            <h1 style="font-size:3rem;color:#ffdd00;margin-bottom:20px;">扫码加入答题</h1>
            <div style="background:white;padding:20px;border-radius:15px;display:inline-block;margin:20px 0;">
                <div id="qrcode"></div>
            </div>
            <p style="font-size:1.6rem;color:#ffdd00;">已加入人数: <span id="participantCount">0</span> 人</p>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <div class="logo">智慧问答</div>
            <div class="event-title">2024年度公司年会 - 知识挑战赛</div>
            <div class="timer" id="timer">30</div>
        </div>
        
        <div class="main-content">
            <div class="question-section">
                <div style="display:flex;justify-content:space-between;margin-bottom:20px;">
                    <div style="font-size:1.8rem;color:#ffdd00;" id="question-number">第 1 题</div>
                    <div style="font-size:1.5rem;background:rgba(255,157,0,0.2);padding:8px 20px;border-radius:50px;" id="question-type">单选题</div>
                </div>
                <div style="font-size:2.8rem;text-align:center;margin:40px 0;" id="question-text">公司成立于哪一年？</div>
                <div class="answers-section" id="answers-section">
                    <div class="answer" data-index="0">A. 2010年</div>
                    <div class="answer" data-index="1">B. 2012年</div>
                    <div class="answer" data-index="2">C. 2015年</div>
                    <div class="answer" data-index="3">D. 2018年</div>
                </div>
            </div>
            
            <div class="ranking-section">
                <h2 style="font-size:2rem;text-align:center;margin-bottom:25px;color:#ffdd00;">实时排名</h2>
                <div id="ranking-list" style="flex:1;overflow-y:auto;">
                    <div style="display:flex;align-items:center;padding:15px;margin-bottom:15px;background:rgba(255,255,255,0.1);border-radius:15px;">
                        <div style="font-size:1.8rem;font-weight:bold;width:50px;text-align:center;color:gold;">1</div>
                        <div style="flex:1;font-size:1.5rem;">张三</div>
                        <div style="font-size:1.8rem;font-weight:bold;color:#ffdd00;">350分</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="control-panel">
            <button class="control-btn" id="resetBtn"><i class="fas fa-redo"></i> 重置比赛</button>
            <div style="display:flex;align-items:center;gap:15px;">
                <div style="font-size:1.6rem;color:#ffdd00;background:rgba(255,255,255,0.1);padding:8px 20px;border-radius:50px;">
                    <i class="fas fa-users"></i> 参与: <span id="liveParticipantCount">4</span>
                </div>
                <button id="showQrBtn" style="background:linear-gradient(90deg,#9b59b6,#8e44ad);color:white;border:none;padding:12px 25px;font-size:1.4rem;border-radius:10px;cursor:pointer;">
                    <i class="fas fa-qrcode"></i> 显示二维码
                </button>
            </div>
            <button class="control-btn" id="nextBtn" style="background:linear-gradient(90deg,#2ecc71,#27ae60);"><i class="fas fa-forward"></i> 下一题</button>
        </div>
    </div>

    <script>
        // 初始化数据
        const questions = [
            {question:"公司成立于哪一年？",type:"单选题",answers:["A. 2010年","B. 2012年","C. 2015年","D. 2018年"],correct:1,explanation:"公司成立于2012年。"},
            {question:"公司核心价值观是什么？",type:"单选题",answers:["A. 创新、诚信、协作","B. 客户第一、团队合作","C. 以人为本、追求卓越","D. 专业、专注、专心"],correct:0,explanation:"核心价值观是：创新、诚信、协作。"}
        ];
        
        let users = [
            {id:1,name:"张三",score:350,correct:3,answered:4},
            {id:2,name:"李四",score:280,correct:3,answered:4},
            {id:3,name:"王五",score:220,correct:2,answered:4},
            {id:4,name:"赵六",score:180,correct:2,answered:4}
        ];
        
        let currentQuestion = 0;
        let timerValue = 30;
        
        // 初始化
        function init() {
            document.getElementById('showQrBtn').addEventListener('click', showQR);
            document.getElementById('closeQrBtn').addEventListener('click', hideQR);
            document.getElementById('resetBtn').addEventListener('click', resetGame);
            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            
            // 生成二维码
            const url = window.location.href.split('?')[0] + '?join=true';
            QRCode.toCanvas(document.getElementById('qrcode'), url, {width:250,height:250});
            
            // 模拟计时器
            setInterval(() => {
                timerValue = timerValue > 0 ? timerValue - 1 : 30;
                document.getElementById('timer').textContent = timerValue;
            }, 1000);
        }
        
        function showQR() {
            document.getElementById('qrOverlay').style.display = 'flex';
            document.getElementById('participantCount').textContent = users.length;
        }
        
        function hideQR() {
            document.getElementById('qrOverlay').style.display = 'none';
        }
        
        function resetGame() {
            if(confirm("确定重置比赛吗？")) {
                users.forEach(user => {
                    user.score = 0;
                    user.correct = 0;
                    user.answered = 0;
                });
                currentQuestion = 0;
                timerValue = 30;
                updateRanking();
            }
        }
        
        function nextQuestion() {
            currentQuestion = (currentQuestion + 1) % questions.length;
            const q = questions[currentQuestion];
            document.getElementById('question-number').textContent = `第 ${currentQuestion + 1} 题`;
            document.getElementById('question-type').textContent = q.type;
            document.getElementById('question-text').textContent = q.question;
            
            const answersDiv = document.getElementById('answers-section');
            answersDiv.innerHTML = '';
            q.answers.forEach((answer, i) => {
                const div = document.createElement('div');
                div.className = 'answer';
                div.textContent = answer;
                div.dataset.index = i;
                div.onclick = function() {
                    // 答题逻辑
                    document.querySelectorAll('.answer').forEach(a => a.style.background = 'rgba(255,255,255,0.15)');
                    this.style.background = 'rgba(255,221,0,0.3)';
                };
                answersDiv.appendChild(div);
            });
        }
        
        function updateRanking() {
            // 更新排名显示
            document.getElementById('liveParticipantCount').textContent = users.length;
        }
        
        // 启动
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
